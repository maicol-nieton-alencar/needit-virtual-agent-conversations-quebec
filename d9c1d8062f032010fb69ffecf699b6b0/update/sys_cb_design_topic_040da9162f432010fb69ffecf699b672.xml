<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">8c0da9162f432010fb69ffecf699b66f</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"9c381f6fd0cd4da195fe1128e0fe8a87","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"9c381f6fd0cd4da195fe1128e0fe8a87"}],"goals":[{"name":"primary","trigger_id":"9c381f6fd0cd4da195fe1128e0fe8a87","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"41f798c992b14163b52cd343f212eacb","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"25f30a46d7cf44699f8a512c38115e6c","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"fc58b99868f749d99f7a9ea0e76ae5be","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"ccb61c17a7fa44e880a19b74d693a80b","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return \"You selected: \" + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"3f2b7a2dd5104fa2829f506134aae911","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"31fc89b79d1243078f5afe8299117eb4","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"94b59d0495374684ae565de9bd109092","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view.\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n\n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        gr.addEncodedQuery('active=true^u_request_type='+vaInputs.needit_type.getValue()+'^u_requested_for='+vaInputs.user);\n        //gr.setLimit(10);\n        gr.orderBy('u_when_needed');\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('number') + \" (\" + gr.getValue('u_when_needed') + \"): \" + gr.getValue('short_description') });\n        }\n        return options;\n    var options = [];\n    return options;\n})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        gr.addEncodedQuery('active=true^u_request_type='+vaInputs.needit_type.getValue()+'^u_requested_for='+vaInputs.user);\n        //gr.setLimit(10);\n        gr.orderBy('u_when_needed');\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('number') + \" (\" + gr.getValue('u_when_needed') + \"): \" + gr.getValue('short_description') });\n        }\n        return options;\n    var options = [];\n    return options;\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"94b59d0495374684ae565de9bd109092","fields":["priority","short_description","u_when_needed"],"id":"40b959c1331d44b09e83bde141ddac1b","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"Decision","name":"Find more records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"5a517c7d8ebe4816ba068ae8e898c8e5","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"6f7b974a0019491fa56288b3f4fd316b","name":"Yes"}],"id":"128f2d50fd5d4fd6b87a49e23ae0b7fb","goal_id":"primary"},{"type":"InputPrompt","variable_id":"f41d28eb91d347858bdc944edb80df1c","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"abeb2baa3dc746f4a1b8fa5a3053c294","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"94b59d0495374684ae565de9bd109092","id":"587d3093f0af43b1a86c3b3f2f2f4293","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"94b59d0495374684ae565de9bd109092","fields":["priority","short_description","u_when_needed"],"id":"7f4611878e1f44059f359a3c4e354682","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"needit_list={{vaInputs.needit_list}}"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"b2a480ce36464429bc4e46ab0b6543cf","name":"What field","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"87ea01c8a5a24f26822ccbeca70d92b3","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What field do you like to update?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"What field?","branches":[{"type":"Branch","label":"When date","expression":{"type":"Applicability","mode":"query","value":"what_field=when_date"},"id":"e7556e6395aa45bf99dae5ca1f102720","name":"When date"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_field=nothing"},"id":"a12f3f8ebd8c444eb1135f938f5ac2de","name":"Nothing"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"what_field=short_description"},"id":"a3d391f6089f44d6ab7d56ebc93affe2","name":"Short description"}],"id":"2d7d401e7a1d4402bfdc0874feeac522","goal_id":"primary"},{"type":"InputPrompt","variable_id":"8853bf7f346043a4b03eec94cbf84a6a","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What the new short description?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"5b618157b40c4e33bbbf10debd53947c","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"94b59d0495374684ae565de9bd109092","id":"955554b12a86418bab891fc97b39592d","name":"Change Short description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Atingiu o limite de buscas?","branches":[{"type":"Branch","label":"search_count &lt; search_limit","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.search_count &lt; vaVars.search_limit)\n        return true;\n    return false;\n\n})()\n"},"id":"c3fb0ebee66943c5ab71d3b7a8f77819","name":"search_count &lt; search_limit"},{"type":"Branch","label":"search_count &gt; search limit","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.search_count &gt; vaVars.search_limit)\n        return true;\n    return false;\n})()\n"},"id":"5bc6438fe95d4ad0862550dbc023355a","name":"search_count &gt; search limit"}],"id":"3bd19b924bc349448d0b1de3423c2bd4","goal_id":"primary"},{"type":"InputPrompt","variable_id":"f86a43e68a1f4ebf8b5f2318d34383c5","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"fb46b1c11420496fae1c067f81b56794","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.search_count++;\n})()\n","id":"0e83525a8fc34ff7b71664ef4d702a8b","name":"Increment search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessageLang(\" You cannot search again, start another chat to search more registers.\", vaContext.getRequesterLang())"},"id":"970379c3e10c4017a6bae0fa933b1d6b","name":"Aviso de limite de buscas","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessageLang(\"bug?\", vaContext.getRequesterLang())"},"id":"758f636a99414cf29e7b9d06b6364237","name":"test","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"InputPrompt","variable_id":"0367b2edad674dff8863edaba0b510be","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"teste\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"80b67536ceab4a798e201c61c86b88df","name":"teste","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"335ef07573e84a66aa1349ffede7a45c","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"ok?\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"string","value":"gs.getMessageLang(\"ok mesmo?{0}\", vaContext.getRequesterLang(), [vaVars.search_count])"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"ed865324a68a4decad97ae53c3c68033","name":"ok?","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""}],"edges":[{"type":"Edge","source_node_id":"7f4611878e1f44059f359a3c4e354682","target_node_id":"3bd19b924bc349448d0b1de3423c2bd4","id":"80123bc411544c7fbbb1d5eba8e92845"},{"type":"Edge","source_node_id":"abeb2baa3dc746f4a1b8fa5a3053c294","target_node_id":"587d3093f0af43b1a86c3b3f2f2f4293","id":"8c7a768589b846298df7a4777d87d051"},{"type":"Edge","source_node_id":"41f798c992b14163b52cd343f212eacb","target_node_id":"fc58b99868f749d99f7a9ea0e76ae5be","id":"1fd2e667433a4045ae85415bc1ba1bdc"},{"type":"Edge","source_node_id":"3f2b7a2dd5104fa2829f506134aae911","target_node_id":"31fc89b79d1243078f5afe8299117eb4","id":"d9e6bff2bc3b487c98959685b65e151e"},{"type":"Edge","source_node_id":"31fc89b79d1243078f5afe8299117eb4","target_node_id":"40b959c1331d44b09e83bde141ddac1b","id":"65d32986db3b4932aaf6b0b8101b2f52"},{"type":"Edge","source_node_id":"128f2d50fd5d4fd6b87a49e23ae0b7fb","target_node_id":"25f30a46d7cf44699f8a512c38115e6c","branch_id":"5a517c7d8ebe4816ba068ae8e898c8e5","id":"0f39c94ff27f48c4b24d4fdc65190b68","name":"5a517c7d8ebe4816ba068ae8e898c8e5"},{"type":"Edge","source_node_id":"128f2d50fd5d4fd6b87a49e23ae0b7fb","target_node_id":"fc58b99868f749d99f7a9ea0e76ae5be","branch_id":"6f7b974a0019491fa56288b3f4fd316b","id":"16131e1d51884736adc382e495414fc8","name":"6f7b974a0019491fa56288b3f4fd316b"},{"type":"Edge","source_node_id":"587d3093f0af43b1a86c3b3f2f2f4293","target_node_id":"7f4611878e1f44059f359a3c4e354682","id":"9e1e58ff870c4cfd9c5e485ca74ab491"},{"type":"Edge","source_node_id":"40b959c1331d44b09e83bde141ddac1b","target_node_id":"b2a480ce36464429bc4e46ab0b6543cf","id":"468fcb5050d443e3bb4daae9b4935080"},{"type":"Edge","source_node_id":"b2a480ce36464429bc4e46ab0b6543cf","target_node_id":"2d7d401e7a1d4402bfdc0874feeac522","id":"023dbf31f3ba45789c546cb025afcf58"},{"type":"Edge","source_node_id":"2d7d401e7a1d4402bfdc0874feeac522","target_node_id":"abeb2baa3dc746f4a1b8fa5a3053c294","branch_id":"e7556e6395aa45bf99dae5ca1f102720","id":"d6f78c545f824a7e9fb20a41e6c4e721","name":"e7556e6395aa45bf99dae5ca1f102720"},{"type":"Edge","source_node_id":"2d7d401e7a1d4402bfdc0874feeac522","target_node_id":"3bd19b924bc349448d0b1de3423c2bd4","branch_id":"a12f3f8ebd8c444eb1135f938f5ac2de","id":"63f6885223964f089db58daa3e98f73e","name":"a12f3f8ebd8c444eb1135f938f5ac2de"},{"type":"Edge","source_node_id":"2d7d401e7a1d4402bfdc0874feeac522","target_node_id":"5b618157b40c4e33bbbf10debd53947c","branch_id":"a3d391f6089f44d6ab7d56ebc93affe2","id":"a854692c30184081b9a2a1c2e0139937","name":"a3d391f6089f44d6ab7d56ebc93affe2"},{"type":"Edge","source_node_id":"5b618157b40c4e33bbbf10debd53947c","target_node_id":"955554b12a86418bab891fc97b39592d","id":"82be29f7c45e45258e800c2c68f23fe5"},{"type":"Edge","source_node_id":"955554b12a86418bab891fc97b39592d","target_node_id":"7f4611878e1f44059f359a3c4e354682","id":"eea1b62400f4484381ec16105bee61f6"},{"type":"Edge","source_node_id":"3bd19b924bc349448d0b1de3423c2bd4","target_node_id":"fb46b1c11420496fae1c067f81b56794","branch_id":"c3fb0ebee66943c5ab71d3b7a8f77819","id":"43c6cd0dcd66462caa55ea25e609eea9","name":"c3fb0ebee66943c5ab71d3b7a8f77819"},{"type":"Edge","source_node_id":"fb46b1c11420496fae1c067f81b56794","target_node_id":"128f2d50fd5d4fd6b87a49e23ae0b7fb","id":"19ba831c71894468b02e82b2d3c32364"},{"type":"Edge","source_node_id":"fc58b99868f749d99f7a9ea0e76ae5be","target_node_id":"0e83525a8fc34ff7b71664ef4d702a8b","id":"a8108dd1a3e246f28b926a224fbe833f"},{"type":"Edge","source_node_id":"0e83525a8fc34ff7b71664ef4d702a8b","target_node_id":"3f2b7a2dd5104fa2829f506134aae911","id":"5313a40e35804d2f9f8092efbac033a3"},{"type":"Edge","source_node_id":"3bd19b924bc349448d0b1de3423c2bd4","target_node_id":"970379c3e10c4017a6bae0fa933b1d6b","branch_id":"5bc6438fe95d4ad0862550dbc023355a","id":"52ff2b7c2f6a4390bf7adcf3e581a0a9","name":"5bc6438fe95d4ad0862550dbc023355a"},{"type":"Edge","source_node_id":"970379c3e10c4017a6bae0fa933b1d6b","target_node_id":"758f636a99414cf29e7b9d06b6364237","id":"2bf65581d8644ea99afa9de627da5a8f"},{"type":"Edge","source_node_id":"758f636a99414cf29e7b9d06b6364237","target_node_id":"80b67536ceab4a798e201c61c86b88df","id":"d54a1d887e4844d7b7e7ec076caeb910"},{"type":"Edge","source_node_id":"80b67536ceab4a798e201c61c86b88df","target_node_id":"ed865324a68a4decad97ae53c3c68033","id":"cfbae981b416401d895f65e915e618b9"},{"type":"Edge","source_node_id":"ed865324a68a4decad97ae53c3c68033","target_node_id":"25f30a46d7cf44699f8a512c38115e6c","id":"175acdfe967845aea878882e17f7dfd2"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"a2fe94f7e27f451a96ad9675a45a484d","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"f0f6e465e4f34e579a8f576b47d54748","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_limit","value":{"type":"String","mode":"string","value":"1"},"id":"a770e527d9d14b61bbfb2a64b8db815d","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"ccb61c17a7fa44e880a19b74d693a80b","name":"needit_type","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"94b59d0495374684ae565de9bd109092","name":"needit_list","formatType":"text","secure":false,"sensitive":false},{"type":"True/False","id":"f86a43e68a1f4ebf8b5f2318d34383c5","name":"search_again","formatType":"text","secure":false,"sensitive":false},{"type":"Date/Time","mode":"date","id":"f41d28eb91d347858bdc944edb80df1c","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"d390bc2968e0454abd59f0cc2dbd2c0b","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"When date","element":"when_date"},{"name":"Short Description","element":"short_description"},{"name":"Nothing","element":"nothing"}],"id":"87ea01c8a5a24f26822ccbeca70d92b3","name":"what_field","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"new_short_description","id":"8853bf7f346043a4b03eec94cbf84a6a","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"b2feb90891a940f39614c1253dd30c50","name":"change_short_description","formatType":"text","secure":false,"sensitive":false},{"type":"Date/Time","mode":"date_time","id":"0367b2edad674dff8863edaba0b510be","name":"teste","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"ok_","id":"335ef07573e84a66aa1349ffede7a45c","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"d9c1d8062f032010fb69ffecf699b6b0","domain":"global","topic_type":"STANDARD","channels":[],"id":"a064588a2f032010fb69ffecf699b6b3","name":"_PRVW__0c0da91698432010d7a50d3b40a57e6c","key_phrases":["Update NeedIt Records","NeedIt Request","NeedIt Record"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"d802588a2f032010fb69ffecf699b6ec"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>a064588a2f032010fb69ffecf699b6b3</design_topic_id>
        <name>_PRVW__0c0da91698432010d7a50d3b40a57e6c</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-03-24 14:11:41</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>040da9162f432010fb69ffecf699b672</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_375864_needit_vi">d9c1d8062f032010fb69ffecf699b6b0</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">d9c1d8062f032010fb69ffecf699b6b0</sys_scope>
        <sys_update_name>sys_cb_design_topic_040da9162f432010fb69ffecf699b672</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-03-24 14:11:41</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
